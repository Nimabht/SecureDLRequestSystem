FROM node:20.2.0-alpine

# Define build arguments for environment variables
ARG VITE_BACKEND_URL
ARG VITE_HTTPS_ENABLED
ARG SSL_KEY_PATH
ARG SSL_CERT_PATH


ENV VITE_BACKEND_URL=$VITE_BACKEND_URL
ENV VITE_HTTPS_ENABLED=$VITE_HTTPS_ENABLED
ENV SSL_KEY_PATH=$SSL_KEY_PATH
ENV SSL_CERT_PATH=$SSL_CERT_PATH


WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

RUN npm run build

EXPOSE 8080

CMD [ "npm", "run", "preview" ]